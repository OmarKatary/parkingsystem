parkingLots =[
    {   id: 1,
        name: 'carrefourzz',
        gridRows:2,
        gridColumns:2,
        latitude: 31.1683,
        longitude: 29.932,
    
        parkingSections:
        [   {parkingSectionId: 2,
            isParkingSectionHorizontal: false,
            isParkingSpotHorizontal: true,
            isDoubleSectioned: true,
            sectionColumn: 1,
            sectionRow: 1,
            parkingSpots: 
                [   {
                    parkingSpotId: 18,
                    parkingSpotIndex: 1,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 19,
                    parkingSpotIndex: 2,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 20,
                    parkingSpotIndex: 3,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 21,
                    parkingSpotIndex: 4,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 22,
                    parkingSpotIndex: 5,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 23,
                    parkingSpotIndex: 6,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 24,
                    parkingSpotIndex: 7,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 25,
                    parkingSpotIndex: 8,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId:26 ,
                    parkingSpotIndex: 9,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 27,
                    parkingSpotIndex: 10,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    }
                ]
            },
            {
            parkingSectionId: 1,
            isParkingSectionHorizontal: false,
            isParkingSpotHorizontal: true,
            isDoubleSectioned: true,
            sectionColumn: 2,
            sectionRow: 1,
            parkingSpots: 
                [   {
                    parkingSpotId: 29,
                    parkingSpotIndex: 1,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 30,
                    parkingSpotIndex: 2,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 31,
                    parkingSpotIndex: 3,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 32,
                    parkingSpotIndex: 4,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 33,
                    parkingSpotIndex: 5,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 34,
                    parkingSpotIndex: 6,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 35,
                    parkingSpotIndex: 7,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 36,
                    parkingSpotIndex: 8,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 37,
                    parkingSpotIndex: 9,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 38,
                    parkingSpotIndex: 10,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    }
                ]
            }
        ]
    },
    {   id: 2,
        name: 'msh carrefourzz',
        gridRows:2,
        gridColumns:2,
        latitude: 31.1683,
        longitude: 29.932,
        parkingSections:
                [   {
                    parkingSectionId: 1,
                    isParkingSectionHorizontal: false,
                    isParkingSpotHorizontal: true,
                    isDoubleSectioned: true,
                    sectionColumn: 1,
                    sectionRow: 1,
                    parkingSpots: 
                [   {
                    parkingSpotId: 8,
                    parkingSpotIndex: 1,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 9,
                    parkingSpotIndex: 2,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 10,
                    parkingSpotIndex: 3,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 11,
                    parkingSpotIndex: 4,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 12,
                    parkingSpotIndex: 5,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 13,
                    parkingSpotIndex: 6,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 14,
                    parkingSpotIndex: 7,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 15,
                    parkingSpotIndex: 8,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 16,
                    parkingSpotIndex: 9,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 17,
                    parkingSpotIndex: 10,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    }
                ]
            },
            {parkingSectionId: 2,
            isParkingSectionHorizontal: false,
            isParkingSpotHorizontal: false,
            isDoubleSectioned: true,
            sectionColumn: 2,
            sectionRow: 1,
            parkingSpots: 
                [  {
                    parkingSpotId: 0,
                    parkingSpotIndex: 1,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 1,
                    parkingSpotIndex: 2,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 2,
                    parkingSpotIndex: 3,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 3,
                    parkingSpotIndex: 4,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 4,
                    parkingSpotIndex: 5,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 5,
                    parkingSpotIndex: 6,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 2
                    },
                    {parkingSpotId: 6,
                    parkingSpotIndex: 7,
                    isOccupied: false,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    },
                    {parkingSpotId: 7,
                    parkingSpotIndex: 8,
                    isOccupied: true,
                    isPending:false,
                    isParkingSpotHorizontal: true,
                    subSectionIndex: 1
                    }
                ]
            }
        ]
    }

]

export default (state = {}, action) =>{
    console.log("from reducer action: ", action)
    switch(action.type){
        case 'get_parking_by_id':
            // @Todo get parkinglot by id (action.payload) from database
             return parkingLots.find(parking => parking.id === action.payload)

        case 'reserve_parking_spot_by_id':
            let { parkingId, sectionId, spotId, isPending } = action.payload           
            let newState = {...state}
            
            let selectedSectionIndex = state.parkingSections.findIndex(section => section.parkingSectionId === sectionId)
            let selectedSection = newState.parkingSections[selectedSectionIndex]
            
            let selectedSpotIndex = selectedSection.parkingSpots.findIndex(spot => spot.parkingSpotIndex ===  spotId)
            let selectedSpot = selectedSection.parkingSpots[selectedSpotIndex]
            
            selectedSpot = {...selectedSpot, isPending:isPending}
            // console.log("selectedSpot: ", selectedSpot)
            selectedSection.parkingSpots[selectedSpotIndex] = selectedSpot
            newState.parkingSections[selectedSectionIndex] = selectedSection
            // console.log("new state: ", newState.parkingSections[selectedSectionIndex].parkingSpots[selectedSpotIndex])
            // @Todo post newState in parkingLot with id parkingId (Or set the isPending of parking spot with spotID in a better way)
            return newState

        default:
            return state
    }
        
} 